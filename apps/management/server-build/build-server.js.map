{
  "version": 3,
  "sources": ["../server/build-server.ts"],
  "sourcesContent": ["import path from 'node:path'\nimport { fileURLToPath } from 'node:url'\nimport esbuild from 'esbuild'\nimport fsExtra from 'fs-extra'\nimport { globSync } from 'glob'\n\nconst pkg = fsExtra.readJsonSync(path.join(process.cwd(), 'package.json'))\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url))\nconst here = (...s: Array<string>) => path.join(__dirname, ...s)\nconst globsafe = (s: string) => s.replace(/\\\\/g, '/')\n\nconst allFiles = globSync(globsafe(here('../server/**/*.*')), {\n  ignore: [\n    'server/dev-server.js', // for development only\n    '**/tsconfig.json',\n    '**/eslint*',\n    '**/__tests__/**',\n  ],\n})\n\nconst entries = []\nfor (const file of allFiles) {\n  if (/\\.(ts|js|tsx|jsx)$/.test(file)) {\n    entries.push(file)\n  } else {\n    const dest = file.replace(here('../server'), here('../server-build'))\n    fsExtra.ensureDirSync(path.parse(dest).dir)\n    fsExtra.copySync(file, dest)\n    console.log(`copied: ${file.replace(`${here('../server')}/`, '')}`)\n  }\n}\n\nconsole.log()\nconsole.log('building...')\n\nesbuild\n  .build({\n    entryPoints: entries,\n    outdir: here('../server-build'),\n    target: [`node${pkg.engines.node}`],\n    platform: 'node',\n    sourcemap: true,\n    format: 'esm',\n    logLevel: 'info',\n  })\n  .catch((error: unknown) => {\n    console.error(error)\n    process.exit(1)\n  })"],
  "mappings": "AAAA,OAAO,UAAU;AACjB,SAAS,qBAAqB;AAC9B,OAAO,aAAa;AACpB,OAAO,aAAa;AACpB,SAAS,gBAAgB;AAEzB,MAAM,MAAM,QAAQ,aAAa,KAAK,KAAK,QAAQ,IAAI,GAAG,cAAc,CAAC;AAEzE,MAAM,YAAY,KAAK,QAAQ,cAAc,YAAY,GAAG,CAAC;AAC7D,MAAM,OAAO,IAAI,MAAqB,KAAK,KAAK,WAAW,GAAG,CAAC;AAC/D,MAAM,WAAW,CAAC,MAAc,EAAE,QAAQ,OAAO,GAAG;AAEpD,MAAM,WAAW,SAAS,SAAS,KAAK,kBAAkB,CAAC,GAAG;AAAA,EAC5D,QAAQ;AAAA,IACN;AAAA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF,CAAC;AAED,MAAM,UAAU,CAAC;AACjB,WAAW,QAAQ,UAAU;AAC3B,MAAI,qBAAqB,KAAK,IAAI,GAAG;AACnC,YAAQ,KAAK,IAAI;AAAA,EACnB,OAAO;AACL,UAAM,OAAO,KAAK,QAAQ,KAAK,WAAW,GAAG,KAAK,iBAAiB,CAAC;AACpE,YAAQ,cAAc,KAAK,MAAM,IAAI,EAAE,GAAG;AAC1C,YAAQ,SAAS,MAAM,IAAI;AAC3B,YAAQ,IAAI,WAAW,KAAK,QAAQ,GAAG,KAAK,WAAW,MAAM,EAAE,GAAG;AAAA,EACpE;AACF;AAEA,QAAQ,IAAI;AACZ,QAAQ,IAAI,aAAa;AAEzB,QACG,MAAM;AAAA,EACL,aAAa;AAAA,EACb,QAAQ,KAAK,iBAAiB;AAAA,EAC9B,QAAQ,CAAC,OAAO,IAAI,QAAQ,MAAM;AAAA,EAClC,UAAU;AAAA,EACV,WAAW;AAAA,EACX,QAAQ;AAAA,EACR,UAAU;AACZ,CAAC,EACA,MAAM,CAAC,UAAmB;AACzB,UAAQ,MAAM,KAAK;AACnB,UAAQ,KAAK,CAAC;AAChB,CAAC;",
  "names": []
}
